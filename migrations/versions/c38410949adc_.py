"""empty message

Revision ID: c38410949adc
Revises: ae4afba8e2f5
Create Date: 2016-03-08 19:45:00.905422

"""

# revision identifiers, used by Alembic.
revision = 'c38410949adc'
down_revision = 'ae4afba8e2f5'

from alembic import op
import sqlalchemy as sa


def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(u'fk_attachment_owner', 'attachment', type_='foreignkey')
    op.drop_constraint(u'fk_attachment_character', 'attachment', type_='foreignkey')
    op.create_foreign_key('fk_attachment_owner', 'attachment', 'user', ['owner_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_attachment_character', 'attachment', 'character', ['character_id'], ['id'], ondelete='SET NULL')
    op.drop_constraint(u'fk_category_recentpost', 'category', type_='foreignkey')
    op.drop_constraint(u'fk_category_categoryparent', 'category', type_='foreignkey')
    op.drop_constraint(u'fk_category_recenttopic', 'category', type_='foreignkey')
    op.drop_constraint(u'fk_category_section', 'category', type_='foreignkey')
    op.create_foreign_key('fk_category_categoryparent', 'category', 'category', ['parent_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_category_recenttopic', 'category', 'topic', ['recent_topic_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_category_recentpost', 'category', 'post', ['recent_post_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_category_section', 'category', 'section', ['section_id'], ['id'], ondelete='SET NULL')
    op.drop_constraint(u'fk_allowedcategorylabel_label', 'category_allowed_labels', type_='foreignkey')
    op.drop_constraint(u'fk_allowedcategorylabel_category', 'category_allowed_labels', type_='foreignkey')
    op.create_foreign_key('fk_allowedcategorylabel_category', 'category_allowed_labels', 'category', ['category_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_allowedcategorylabel_label', 'category_allowed_labels', 'label', ['label_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_allowedcategoryuser_user', 'category_allowed_users', type_='foreignkey')
    op.drop_constraint(u'fk_allowedcategoryuser_category', 'category_allowed_users', type_='foreignkey')
    op.create_foreign_key('fk_allowedcategoryuser_user', 'category_allowed_users', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_allowedcategoryuser_category', 'category_allowed_users', 'category', ['category_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_character_author', 'character', type_='foreignkey')
    op.drop_constraint(u'fk_character_default_gallery', 'character', type_='foreignkey')
    op.drop_constraint(u'fk_character_default_avatar', 'character', type_='foreignkey')
    op.create_foreign_key('fk_character_author', 'character', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_character_default_avatar', 'character', 'attachment', ['default_avatar_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_character_default_gallery', 'character', 'attachment', ['default_gallery_image_id'], ['id'], ondelete='SET NULL')
    op.drop_constraint(u'fk_fingerprint_user', 'fingerprint', type_='foreignkey')
    op.create_foreign_key('fk_fingerprint_user', 'fingerprint', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_followinguser_user', 'following_user', type_='foreignkey')
    op.drop_constraint(u'fk_followinguser_following', 'following_user', type_='foreignkey')
    op.create_foreign_key('fk_followinguser_following', 'following_user', 'user', ['following_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_followinguser_user', 'following_user', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_friendship_user', 'friendship', type_='foreignkey')
    op.drop_constraint(u'fk_friendship_friend', 'friendship', type_='foreignkey')
    op.create_foreign_key('fk_friendship_user', 'friendship', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_friendship_friend', 'friendship', 'user', ['friend_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_ignoringuser_ignoring', 'ignoring_user', type_='foreignkey')
    op.drop_constraint(u'fk_ignoringuser_user', 'ignoring_user', type_='foreignkey')
    op.create_foreign_key('fk_ignoringuser_user', 'ignoring_user', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_ignoringuser_ignoring', 'ignoring_user', 'user', ['ignoring_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_ipaddress_user', 'ip_address', type_='foreignkey')
    op.create_foreign_key('fk_ipaddress_user', 'ip_address', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_notification_author', 'notification', type_='foreignkey')
    op.drop_constraint(u'fk_notification_user', 'notification', type_='foreignkey')
    op.create_foreign_key('fk_notification_user', 'notification', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_notification_author', 'notification', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.add_column('post', sa.Column('avatar_id', sa.Integer(), nullable=True))
    op.drop_constraint(u'fk_post_editor', 'post', type_='foreignkey')
    op.drop_constraint(u'fk_post_topic', 'post', type_='foreignkey')
    op.drop_constraint(u'post_fk_post_avatar_fkey', 'post', type_='foreignkey')
    op.drop_constraint(u'fk_post_character', 'post', type_='foreignkey')
    op.drop_constraint(u'fk_post_author', 'post', type_='foreignkey')
    op.create_foreign_key('fk_post_author', 'post', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_post_topic', 'post', 'topic', ['topic_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_post_character', 'post', 'character', ['character_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_post_editor', 'post', 'user', ['editor_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_post_avatar', 'post', 'attachment', ['avatar_id'], ['id'], ondelete='SET NULL')
    op.drop_column('post', 'fk_post_avatar')
    op.drop_constraint(u'fk_postboop_post', 'post_boops_from_users', type_='foreignkey')
    op.drop_constraint(u'fk_postboop_user', 'post_boops_from_users', type_='foreignkey')
    op.create_foreign_key('fk_postboop_post', 'post_boops_from_users', 'post', ['post_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_postboop_user', 'post_boops_from_users', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_pm_author', 'private_message', type_='foreignkey')
    op.create_foreign_key('fk_pm_author', 'private_message', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_pm_r_pm', 'private_message_reply', type_='foreignkey')
    op.drop_constraint(u'fk_pm_r_author', 'private_message_reply', type_='foreignkey')
    op.create_foreign_key('fk_pm_r_author', 'private_message_reply', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_pm_r_pm', 'private_message_reply', 'private_message', ['pm_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_pm_u_author', 'private_message_user', type_='foreignkey')
    op.drop_constraint(u'fk_pm_u_pm', 'private_message_user', type_='foreignkey')
    op.create_foreign_key('fk_pm_u_pm', 'private_message_user', 'private_message', ['pm_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_pm_u_author', 'private_message_user', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_report_author', 'report', type_='foreignkey')
    op.create_foreign_key('fk_report_author', 'report', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_reportcomment_report', 'report_comment', type_='foreignkey')
    op.drop_constraint(u'fk_reportcomment_author', 'report_comment', type_='foreignkey')
    op.create_foreign_key('fk_reportcomment_report', 'report_comment', 'report', ['report_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_reportcomment_author', 'report_comment', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_sitelog_user', 'site_log', type_='foreignkey')
    op.create_foreign_key('fk_sitelog_user', 'site_log', 'user', ['user_id'], ['id'], ondelete='SET NULL')
    op.drop_constraint(u'fk_status_comment_status', 'status_comment', type_='foreignkey')
    op.drop_constraint(u'fk_status_comment_author', 'status_comment', type_='foreignkey')
    op.create_foreign_key('fk_status_comment_status', 'status_comment', 'status_update', ['status_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_status_comment_author', 'status_comment', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_status_update_author', 'status_update', type_='foreignkey')
    op.drop_constraint(u'fk_status_update_attachedtouser', 'status_update', type_='foreignkey')
    op.create_foreign_key('fk_status_update_author', 'status_update', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_status_update_attachedtouser', 'status_update', 'user', ['attached_to_user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_status_user_status', 'status_update_user', type_='foreignkey')
    op.drop_constraint(u'fk_status_user_author', 'status_update_user', type_='foreignkey')
    op.create_foreign_key('fk_status_user_status', 'status_update_user', 'status_update', ['status_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_status_user_author', 'status_update_user', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_topic_category', 'topic', type_='foreignkey')
    op.drop_constraint(u'fk_topic_recentpost', 'topic', type_='foreignkey')
    op.drop_constraint(u'fk_topic_editor', 'topic', type_='foreignkey')
    op.drop_constraint(u'fk_topic_author', 'topic', type_='foreignkey')
    op.create_foreign_key('fk_topic_author', 'topic', 'user', ['author_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_topic_editor', 'topic', 'user', ['editor_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_topic_recentpost', 'topic', 'post', ['recent_post_id'], ['id'], ondelete='SET NULL')
    op.create_foreign_key('fk_topic_category', 'topic', 'category', ['category_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_topicbanned_topic', 'topic_banned_users', type_='foreignkey')
    op.drop_constraint(u'fk_topicbanned_user', 'topic_banned_users', type_='foreignkey')
    op.create_foreign_key('fk_topicbanned_user', 'topic_banned_users', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_topicbanned_topic', 'topic_banned_users', 'topic', ['topic_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_topicmods_user', 'topic_moderators', type_='foreignkey')
    op.drop_constraint(u'fk_topicmods_topic', 'topic_moderators', type_='foreignkey')
    op.create_foreign_key('fk_topicmods_topic', 'topic_moderators', 'topic', ['topic_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_topicmods_user', 'topic_moderators', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_topicwatchers_user', 'topic_watchers', type_='foreignkey')
    op.drop_constraint(u'fk_topicwatchers_topic', 'topic_watchers', type_='foreignkey')
    op.create_foreign_key('fk_topicwatchers_topic', 'topic_watchers', 'topic', ['topic_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_topicwatchers_user', 'topic_watchers', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.drop_constraint(u'fk_userrole_user', 'user_roles', type_='foreignkey')
    op.drop_constraint(u'fk_userrole_role', 'user_roles', type_='foreignkey')
    op.create_foreign_key('fk_userrole_user', 'user_roles', 'user', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('fk_userrole_role', 'user_roles', 'role', ['role_id'], ['id'], ondelete='CASCADE')
    ### end Alembic commands ###


def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint('fk_userrole_role', 'user_roles', type_='foreignkey')
    op.drop_constraint('fk_userrole_user', 'user_roles', type_='foreignkey')
    op.create_foreign_key(u'fk_userrole_role', 'user_roles', 'role', ['role_id'], ['id'])
    op.create_foreign_key(u'fk_userrole_user', 'user_roles', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_topicwatchers_user', 'topic_watchers', type_='foreignkey')
    op.drop_constraint('fk_topicwatchers_topic', 'topic_watchers', type_='foreignkey')
    op.create_foreign_key(u'fk_topicwatchers_topic', 'topic_watchers', 'topic', ['topic_id'], ['id'])
    op.create_foreign_key(u'fk_topicwatchers_user', 'topic_watchers', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_topicmods_user', 'topic_moderators', type_='foreignkey')
    op.drop_constraint('fk_topicmods_topic', 'topic_moderators', type_='foreignkey')
    op.create_foreign_key(u'fk_topicmods_topic', 'topic_moderators', 'topic', ['topic_id'], ['id'])
    op.create_foreign_key(u'fk_topicmods_user', 'topic_moderators', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_topicbanned_topic', 'topic_banned_users', type_='foreignkey')
    op.drop_constraint('fk_topicbanned_user', 'topic_banned_users', type_='foreignkey')
    op.create_foreign_key(u'fk_topicbanned_user', 'topic_banned_users', 'user', ['user_id'], ['id'])
    op.create_foreign_key(u'fk_topicbanned_topic', 'topic_banned_users', 'topic', ['topic_id'], ['id'])
    op.drop_constraint('fk_topic_category', 'topic', type_='foreignkey')
    op.drop_constraint('fk_topic_recentpost', 'topic', type_='foreignkey')
    op.drop_constraint('fk_topic_editor', 'topic', type_='foreignkey')
    op.drop_constraint('fk_topic_author', 'topic', type_='foreignkey')
    op.create_foreign_key(u'fk_topic_author', 'topic', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_topic_editor', 'topic', 'user', ['editor_id'], ['id'])
    op.create_foreign_key(u'fk_topic_recentpost', 'topic', 'post', ['recent_post_id'], ['id'])
    op.create_foreign_key(u'fk_topic_category', 'topic', 'category', ['category_id'], ['id'])
    op.drop_constraint('fk_status_user_author', 'status_update_user', type_='foreignkey')
    op.drop_constraint('fk_status_user_status', 'status_update_user', type_='foreignkey')
    op.create_foreign_key(u'fk_status_user_author', 'status_update_user', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_status_user_status', 'status_update_user', 'status_update', ['status_id'], ['id'])
    op.drop_constraint('fk_status_update_attachedtouser', 'status_update', type_='foreignkey')
    op.drop_constraint('fk_status_update_author', 'status_update', type_='foreignkey')
    op.create_foreign_key(u'fk_status_update_attachedtouser', 'status_update', 'user', ['attached_to_user_id'], ['id'])
    op.create_foreign_key(u'fk_status_update_author', 'status_update', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_status_comment_author', 'status_comment', type_='foreignkey')
    op.drop_constraint('fk_status_comment_status', 'status_comment', type_='foreignkey')
    op.create_foreign_key(u'fk_status_comment_author', 'status_comment', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_status_comment_status', 'status_comment', 'status_update', ['status_id'], ['id'])
    op.drop_constraint('fk_sitelog_user', 'site_log', type_='foreignkey')
    op.create_foreign_key(u'fk_sitelog_user', 'site_log', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_reportcomment_author', 'report_comment', type_='foreignkey')
    op.drop_constraint('fk_reportcomment_report', 'report_comment', type_='foreignkey')
    op.create_foreign_key(u'fk_reportcomment_author', 'report_comment', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_reportcomment_report', 'report_comment', 'report', ['report_id'], ['id'])
    op.drop_constraint('fk_report_author', 'report', type_='foreignkey')
    op.create_foreign_key(u'fk_report_author', 'report', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_pm_u_author', 'private_message_user', type_='foreignkey')
    op.drop_constraint('fk_pm_u_pm', 'private_message_user', type_='foreignkey')
    op.create_foreign_key(u'fk_pm_u_pm', 'private_message_user', 'private_message', ['pm_id'], ['id'])
    op.create_foreign_key(u'fk_pm_u_author', 'private_message_user', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_pm_r_pm', 'private_message_reply', type_='foreignkey')
    op.drop_constraint('fk_pm_r_author', 'private_message_reply', type_='foreignkey')
    op.create_foreign_key(u'fk_pm_r_author', 'private_message_reply', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_pm_r_pm', 'private_message_reply', 'private_message', ['pm_id'], ['id'])
    op.drop_constraint('fk_pm_author', 'private_message', type_='foreignkey')
    op.create_foreign_key(u'fk_pm_author', 'private_message', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_postboop_user', 'post_boops_from_users', type_='foreignkey')
    op.drop_constraint('fk_postboop_post', 'post_boops_from_users', type_='foreignkey')
    op.create_foreign_key(u'fk_postboop_user', 'post_boops_from_users', 'user', ['user_id'], ['id'])
    op.create_foreign_key(u'fk_postboop_post', 'post_boops_from_users', 'post', ['post_id'], ['id'])
    op.add_column('post', sa.Column('fk_post_avatar', sa.INTEGER(), autoincrement=False, nullable=True))
    op.drop_constraint('fk_post_avatar', 'post', type_='foreignkey')
    op.drop_constraint('fk_post_editor', 'post', type_='foreignkey')
    op.drop_constraint('fk_post_character', 'post', type_='foreignkey')
    op.drop_constraint('fk_post_topic', 'post', type_='foreignkey')
    op.drop_constraint('fk_post_author', 'post', type_='foreignkey')
    op.create_foreign_key(u'fk_post_author', 'post', 'user', ['author_id'], ['id'])
    op.create_foreign_key(u'fk_post_character', 'post', 'character', ['character_id'], ['id'])
    op.create_foreign_key(u'post_fk_post_avatar_fkey', 'post', 'attachment', ['fk_post_avatar'], ['id'])
    op.create_foreign_key(u'fk_post_topic', 'post', 'topic', ['topic_id'], ['id'])
    op.create_foreign_key(u'fk_post_editor', 'post', 'user', ['editor_id'], ['id'])
    op.drop_column('post', 'avatar_id')
    op.drop_constraint('fk_notification_author', 'notification', type_='foreignkey')
    op.drop_constraint('fk_notification_user', 'notification', type_='foreignkey')
    op.create_foreign_key(u'fk_notification_user', 'notification', 'user', ['user_id'], ['id'])
    op.create_foreign_key(u'fk_notification_author', 'notification', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_ipaddress_user', 'ip_address', type_='foreignkey')
    op.create_foreign_key(u'fk_ipaddress_user', 'ip_address', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_ignoringuser_ignoring', 'ignoring_user', type_='foreignkey')
    op.drop_constraint('fk_ignoringuser_user', 'ignoring_user', type_='foreignkey')
    op.create_foreign_key(u'fk_ignoringuser_user', 'ignoring_user', 'user', ['user_id'], ['id'])
    op.create_foreign_key(u'fk_ignoringuser_ignoring', 'ignoring_user', 'user', ['ignoring_id'], ['id'])
    op.drop_constraint('fk_friendship_friend', 'friendship', type_='foreignkey')
    op.drop_constraint('fk_friendship_user', 'friendship', type_='foreignkey')
    op.create_foreign_key(u'fk_friendship_friend', 'friendship', 'user', ['friend_id'], ['id'])
    op.create_foreign_key(u'fk_friendship_user', 'friendship', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_followinguser_user', 'following_user', type_='foreignkey')
    op.drop_constraint('fk_followinguser_following', 'following_user', type_='foreignkey')
    op.create_foreign_key(u'fk_followinguser_following', 'following_user', 'user', ['following_id'], ['id'])
    op.create_foreign_key(u'fk_followinguser_user', 'following_user', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_fingerprint_user', 'fingerprint', type_='foreignkey')
    op.create_foreign_key(u'fk_fingerprint_user', 'fingerprint', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_character_default_gallery', 'character', type_='foreignkey')
    op.drop_constraint('fk_character_default_avatar', 'character', type_='foreignkey')
    op.drop_constraint('fk_character_author', 'character', type_='foreignkey')
    op.create_foreign_key(u'fk_character_default_avatar', 'character', 'attachment', ['default_avatar_id'], ['id'])
    op.create_foreign_key(u'fk_character_default_gallery', 'character', 'attachment', ['default_gallery_image_id'], ['id'])
    op.create_foreign_key(u'fk_character_author', 'character', 'user', ['author_id'], ['id'])
    op.drop_constraint('fk_allowedcategoryuser_category', 'category_allowed_users', type_='foreignkey')
    op.drop_constraint('fk_allowedcategoryuser_user', 'category_allowed_users', type_='foreignkey')
    op.create_foreign_key(u'fk_allowedcategoryuser_category', 'category_allowed_users', 'category', ['category_id'], ['id'])
    op.create_foreign_key(u'fk_allowedcategoryuser_user', 'category_allowed_users', 'user', ['user_id'], ['id'])
    op.drop_constraint('fk_allowedcategorylabel_label', 'category_allowed_labels', type_='foreignkey')
    op.drop_constraint('fk_allowedcategorylabel_category', 'category_allowed_labels', type_='foreignkey')
    op.create_foreign_key(u'fk_allowedcategorylabel_category', 'category_allowed_labels', 'category', ['category_id'], ['id'])
    op.create_foreign_key(u'fk_allowedcategorylabel_label', 'category_allowed_labels', 'label', ['label_id'], ['id'])
    op.drop_constraint('fk_category_section', 'category', type_='foreignkey')
    op.drop_constraint('fk_category_recentpost', 'category', type_='foreignkey')
    op.drop_constraint('fk_category_recenttopic', 'category', type_='foreignkey')
    op.drop_constraint('fk_category_categoryparent', 'category', type_='foreignkey')
    op.create_foreign_key(u'fk_category_section', 'category', 'section', ['section_id'], ['id'])
    op.create_foreign_key(u'fk_category_recenttopic', 'category', 'topic', ['recent_topic_id'], ['id'])
    op.create_foreign_key(u'fk_category_categoryparent', 'category', 'category', ['parent_id'], ['id'])
    op.create_foreign_key(u'fk_category_recentpost', 'category', 'post', ['recent_post_id'], ['id'])
    op.drop_constraint('fk_attachment_character', 'attachment', type_='foreignkey')
    op.drop_constraint('fk_attachment_owner', 'attachment', type_='foreignkey')
    op.create_foreign_key(u'fk_attachment_character', 'attachment', 'character', ['character_id'], ['id'])
    op.create_foreign_key(u'fk_attachment_owner', 'attachment', 'user', ['owner_id'], ['id'])
    ### end Alembic commands ###
