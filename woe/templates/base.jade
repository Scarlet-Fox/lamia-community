!!! 5
doctype html(lang="en")
{% macro form_errors(form) %}
{% if form.errors %}
<ul class="errors">
{% for field_name, field_errors in form.errors|dictsort if field_errors %}
{% for error in field_errors %}
<li>{{ form[field_name].label }}: {{ error }}</li>
{% endfor %}
{% endfor %}
</ul>
{% endif %}
{% endmacro %}
head
    meta(http-equiv='content-type', content='text/html; charset=UTF-8')
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    meta(name='description', content='')
    meta(name='author', content='')
    title {{ page_title }}
    link(href='/static/assets/bootstrap.css', rel='stylesheet')
    link(href='/static/local/css/woe-theme.css', rel='stylesheet')
    {% block header %}
    {% endblock %}
    script(src='/static/assets/ie-emulation-modes-warning.js')
    // HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      |       
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
body(role='document')
  a(href="/")
    .site-background.hidden-xs
  .container#site-container
    nav.navbar.navbar-default
      .container-fluid
        .navbar-header
          button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar', aria-expanded='false', aria-controls='navbar')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#')
        #navbar.navbar-collapse.collapse
          ul.nav.navbar-nav
            if not current_user.is_authenticated()
              li#sign-in-li.hidden-sm.hidden-md.hidden-lg
                a(href='/sign-in')
                  | Sign In
              li#register-li.hidden-sm.hidden-md.hidden-lg
                a(href='/register')
                  | Register
            li#forum-li
              a(href='/') Forum
              li
                a(href='/status-updates') Status Updates
            //- li.dropdown
            //-   a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-expanded='false')
            //-     | Community
            //-     span.caret
            //-   |
            //-   ul.dropdown-menu(role='menu')
            //-     //- li
            //-     //-   a(href='#') Blogs
            //-     //- li
            //-     //-   a(href='#') Streaming
            //-     li
            //-       a(href='#') Minecraft
            //-     li.divider
            //-     li
            //-       a(href='#') Members
            li.dropdown
              a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-expanded='false')
                | Roleplay 
                span.caret
              ul.dropdown-menu(role='menu')
                li
                  a(href='/category/roleplays') Roleplays
                li
                  a(href='/category/scenarios') Scenarios
                //- li.divider
                //- li
                //-   a(href='#') Lore
                //- li
                //-   a(href='#') Characters
            li
              a(href='/search')
                | Search
          ul.nav.navbar-nav.navbar-right
            if current_user.is_authenticated()
              li
                img(src='{{current_user.get_avatar_url("40")}}', width='{{current_user.avatar_40_x}}', height='{{current_user.avatar_40_y}}', style='margin-top: 5px; margin-left: 15px;', class="avatar-mini")
              li.dropdown
                a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-expanded='false')
                  | {{current_user.display_name}}
                  span.caret
                ul.dropdown-menu(role='menu')
                    li
                    li
                      a(href='/dashboard') Dashboard
                    li
                      a(href='/messages') Messages
                    li
                      a(href='/member/{{current_user.login_name}}') Profile
                    li.divider
                    li
                      a#sign-out(href='#') Sign Out
            else
              li#sign-in-li.hidden-xs
                a(href='/sign-in')
                  | Sign In
              li#register-li.hidden-xs
                a(href='/register')
                  | Register
            if current_user.is_authenticated()
              li.dropdown#dashboard-li
                a.dropdown-toggle(href='/dashboard', data-toggle='dropdown', role='button', aria-expanded='false')
                  span.badge#notification-counter {{current_user.get_notification_count()}}
                ul.dropdown-menu#notification-dropdown(role='menu')
                  li
                    a(href='/dashboard') Dashboard
                  li.divider
                  for notification in current_user.get_recent_notifications(15)
                    li
                      a.notification-link(href='{{notification.url}}', data-notification="{{notification.pk}}") {{notification.text}}
                      
        // /.nav-collapse
      // /.container-fluid
    
    #content-border
      {% block content %}
      {% endblock %}
  #img-click-modal.modal.fade
  
  script(src="/static/assets/jquery.js")
  script(src="/static/assets/socket.io.js")
  script(src="/static/assets/bootstrap.js")
  script(src="/static/assets/moment.min.js")
  script(src="/static/assets/ie10-viewport-bug-workaround.js")
  script(src="/static/local/js/base.js")
  if current_user.is_authenticated()
    script(type="text/javascript")
      $(document).ready(function(){
        window.woe_is_me = "{{current_user.login_name}}";
        $(".href_span").click(function (e) {
          window.location = $(this).attr("href");
        });
        $("#sign-out").click(function(e) {
          e.preventDefault();
          $.post("/sign-out", function(data) {
            window.location = "/";
          });
        });
      });
  {% block script %}
  {% endblock %}
  
