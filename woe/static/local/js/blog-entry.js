// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var inline_editor;
    if ($("#new-post-box").length > 0) {
      inline_editor = new InlineEditor("#new-post-box", "", false, false, 150);
      return inline_editor.onSave(function(html, text) {
        inline_editor.disableSaveButton();
        return $.post($("#entry-url").attr("href") + "/new-comment", JSON.stringify({
          post: html,
          text: text
        }), (function(_this) {
          return function(data) {
            if (data.no_content != null) {
              inline_editor.flashError("You forgot to write something.");
            }
            if (data.error != null) {
              inline_editor.flashError(data.error);
            }
            if (data.success != null) {
              inline_editor.clearEditor();
              return window.location = data.url;
            } else {
              return inline_editor.enableSaveButton();
            }
          };
        })(this));
      });
    }
  });

}).call(this);
